<app-header [headerClass]="'light_header'"></app-header>

<app-flight-booking-breadcrumb [bg_image]="bg_image" [parent]="parent" [subParent]="subParent" [child]="child"></app-flight-booking-breadcrumb>

<section class="section-b-space bg-inner animated-section">
    <app-animations [type]="'dots'"></app-animations>
    <div class="container">
        <div class="booking-intro">
            <h1>Book Your Flight</h1>
            <p class="lead">Experience seamless air travel with our easy booking process. Fill out the form below to secure your journey.</p>
            <div class="booking-highlights">
                <div class="highlight-item">
                    <i class="fa fa-check-circle"></i>
                    <span>Instant Confirmation</span>
                </div>
                <div class="highlight-item">
                    <i class="fa fa-lock"></i>
                    <span>Secure Booking</span>
                </div>
                <div class="highlight-item">
                    <i class="fa fa-headset"></i>
                    <span>24/7 Support</span>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Left Column: Form -->
            <div class="col-lg-7">
                <div class="guest-detail">
                    <div class="section-info">
                        <h2>Passenger Information</h2>
                        <p>Please provide your details for flight booking.</p>
                    </div>

                    <form [formGroup]="flightForm" (ngSubmit)="onSubmit()">
                        <div class="form-section">
                            <div class="row g-3">
                                <!-- Personal Information -->
                                <div class="col-md-12">
                                    <label>Full Name <span class="required">*</span></label>
                                    <input type="text" 
                                           formControlName="name" 
                                           class="form-control" 
                                           placeholder="Enter your full name"
                                           [ngClass]="{'is-invalid': nameControl?.invalid && nameControl?.touched}">
                                    <div class="invalid-feedback" *ngIf="nameError">{{ nameError }}</div>
                                </div>

                                <div class="col-md-6">
                                    <label>Email <span class="required">*</span></label>
                                    <input type="email" 
                                           formControlName="email" 
                                           class="form-control" 
                                           placeholder="Enter your email"
                                           [ngClass]="{'is-invalid': emailControl?.invalid && emailControl?.touched}">
                                    <div class="invalid-feedback" *ngIf="emailError">{{ emailError }}</div>
                                </div>

                                <div class="col-md-6">
                                    <label>Phone Number <span class="required">*</span></label>
                                    <input type="tel" 
                                           formControlName="phone" 
                                           class="form-control"
                                           placeholder="Enter phone number"
                                           (input)="onPhoneInput($event)"
                                           [ngClass]="{'is-invalid': phoneControl?.invalid && phoneControl?.touched}">
                                    <div class="invalid-feedback" *ngIf="phoneError">{{ phoneError }}</div>
                                </div>

                                <!-- Passport Details -->
                                <div class="col-md-6">
                                    <label>Passport Number <span class="required">*</span></label>
                                    <input type="text" 
                                           formControlName="passport_number" 
                                           class="form-control"
                                           placeholder="Enter passport number"
                                           (input)="onPassportInput($event)"
                                           style="text-transform: uppercase;"
                                           [ngClass]="{'is-invalid': passportControl?.invalid && passportControl?.touched}">
                                    <div class="invalid-feedback" *ngIf="passportError">{{ passportError }}</div>
                                </div>

                                <div class="col-md-6">
                                    <label>Passport Expiry Date <span class="required">*</span></label>
                                    <input type="date" 
                                           formControlName="passport_expiry" 
                                           class="form-control"
                                           [ngClass]="{'is-invalid': passportExpiryControl?.invalid && passportExpiryControl?.touched}">
                                    <div class="invalid-feedback" *ngIf="passportExpiryControl?.errors?.['pastDate']">
                                        Passport must not be expired
                                    </div>
                                </div>

                                <!-- Preferences -->
                                <div class="col-md-6">
                                    <label>Meal Preference</label>
                                    <select formControlName="meal_preference" class="form-control">
                                        <option value="">Select Meal Preference</option>
                                        <option value="vegetarian">Vegetarian</option>
                                        <option value="non-vegetarian">Non-Vegetarian</option>
                                        <option value="vegan">Vegan</option>
                                        <option value="halal">Halal</option>
                                    </select>
                                </div>

                                <div class="col-md-6">
                                    <label>Seat Preference</label>
                                    <select formControlName="seat_preference" class="form-control">
                                        <option value="">Select Seat Preference</option>
                                        <option value="window">Window</option>
                                        <option value="aisle">Aisle</option>
                                        <option value="middle">Middle</option>
                                    </select>
                                </div>

                                <!-- Special Requests -->
                                <div class="col-md-12">
                                    <label>Special Requests</label>
                                    <textarea formControlName="special_requests" 
                                              class="form-control" 
                                              rows="3"
                                              placeholder="Enter any special requests or requirements"></textarea>
                                </div>

                                <!-- Terms -->
                                <div class="col-md-12">
                                    <div class="form-check">
                                        <input type="checkbox" 
                                               formControlName="terms_accepted" 
                                               class="form-check-input" 
                                               id="termsCheck">
                                        <label class="form-check-label" for="termsCheck">
                                            I accept the terms and conditions
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="submit-btn">
                            <button type="submit" 
                                    class="btn btn-solid" 
                                    [disabled]="!flightForm.valid || isSubmitting">
                                <i class="fa fa-paper-plane"></i>
                                {{ isSubmitting ? 'Processing...' : 'Book Flight' }}
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Why Choose Us Section -->
                <div class="additional-info">
                    <div class="why-choose-us">
                        <h3>Why Choose Our Flight Services?</h3>
                        <div class="features-grid">
                            <div class="feature-item">
                                <i class="fa fa-plane"></i>
                                <div class="feature-content">
                                    <h4>Best Prices</h4>
                                    <p>Competitive fares with no hidden charges</p>
                                </div>
                            </div>
                            <div class="feature-item">
                                <i class="fa fa-shield-alt"></i>
                                <div class="feature-content">
                                    <h4>Safe Travel</h4>
                                    <p>Your safety is our top priority</p>
                                </div>
                            </div>
                            <div class="feature-item">
                                <i class="fa fa-clock"></i>
                                <div class="feature-content">
                                    <h4>Quick Process</h4>
                                    <p>Fast and efficient booking system</p>
                                </div>
                            </div>
                            <div class="feature-item">
                                <i class="fa fa-headset"></i>
                                <div class="feature-content">
                                    <h4>24/7 Support</h4>
                                    <p>Round-the-clock customer assistance</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Summary -->
            <div class="col-lg-5">
                <app-flight-booking-summary></app-flight-booking-summary>
            </div>
        </div>
    </div>
</section>

<app-footer [location]="true"></app-footer>
<app-layout [loaderType]="'basic'"></app-layout>
